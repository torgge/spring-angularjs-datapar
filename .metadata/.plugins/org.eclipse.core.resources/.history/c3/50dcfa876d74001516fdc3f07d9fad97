'use strict';

angular.module('app')
.controller(
  'MercaderiaController',
  ['$scope','$http','uiGridConstants','mercadoriaService','categoriaService' 
  function ($scope,$http,uiGridConstants, mercadoriaService ,categoriaService){

     // usando padrao factory para consumir um servico
	 mercadoriaService.getMercaderias()  
		.success(function (data) {
			 $scope.gridOptions.data = data;
	 });
	 
	 categoriaService.getCategorias()  
		.success(function (data) {
			 $scope.categorias = data;
	 });

	 
	 $scope.model = {mercadoria:{id:"",nome:""},categoria:{id:"",nome:""},unidade:{id:"",nome:""}}; 
	 
	 
	 $scope.select = {
	            value1: "Option1",
	            value2: "I'm an option",
	            choices: ["Option1", "I'm an option", "This is materialize", "No, this is Patrick."]
	  }; 
	  
	 
	 
	 
	
	
	/*
	 * $http.get('api/mercaderia') .success(function (data) {
	 * $scope.gridOptions.data = data; });
	 */

	 $scope.gridOptions = {
			    enableFiltering: true,
			    enablePaginationControls: true,
			    enableGridMenu: false,
			    paginationPageSize: 10,
			    paginationPageSizes: [10, 20, 30],
			    columnDefs: [
			      { name: 'id'				, field:'id'				 , displayName:'Código'			, width: 80 , enableColumnMenu: false },
			      { name: 'descricao' , field:'descricao'  , displayName:'Descrición'	, enableColumnMenu: false },
				  { name: 'unidade'		, field:'unidade.descricao'	 , displayName:'Unidade'   ,  enableColumnMenu: false },
				  { name: 'categoria'	, field:'categoria.descricao'	 , displayName:'Categoria',  enableColumnMenu: false }
			    ]
	};

}]);
